- block:
    - name: Install core libraries
      community.general.zypper:
        name:
          - easyeffects
          - stow
          - alacritty
          - neovim
          - btop
          - firefox
          - git
          - zsh
          - eza
          - neofetch
          - starship
          - opi
          - nodejs
          - gh
        state: present

- block:
    - name: Install opi libraries
      shell: opi -n -m codecs zsh-completions zsh-autosuggestions

- block:
    - name: Set zsh as default shell
      shell: sudo chsh -s $(which zsh)
      become_user: root

- block:
    - name: Clone dotfiles
      ansible.builtin.git:
        repo: https://github.com/Lailanater/dotfiles.git
        dest: /home/clail/dotfiles
    - name: Stow dotfiles
      shell: cd $HOME/dotfiles && stow */
